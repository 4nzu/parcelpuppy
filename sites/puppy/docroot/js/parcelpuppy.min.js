"use strict";var a={};a.AboutMeForm={},jQuery(function(){a.AboutMeForm.validateFields=function(){var b=a.AboutMeForm.validateNameFields();return b=a.AboutMeForm.validateEmailField()&&b},a.AboutMeForm.validateNameFields=function(){return a.Validators.validateFormFieldsAreFilledOut([$("#about-me-form-first-name"),$("#about-me-form-last-name")])},a.AboutMeForm.validateEmailField=function(){return a.Validators.validateFormFieldIsFilledOut($("#about-me-form-email"))}}),a.AccountTabs={},jQuery(function(){a.AccountTabs.setTab=function(){if($("#account-tabs").length){var a=document.location.hash||"#profile";$("#account-tabs a[href="+a+"]").tab("show")}},a.AccountTabs.setHashChangeHandler=function(){$("#account-tabs").length&&$(window).on("hashchange",a.AccountTabs.setTab)},a.AccountTabs.setTab(),a.AccountTabs.setHashChangeHandler()}),a.AddressForm={},jQuery(function(){a.AddressForm.validateFields=function(){var b=a.AddressForm.validateNameFields();return b=a.AddressForm.validateStreetAddressFields()&&b,b=a.AddressForm.validateStateField()&&b,b=a.AddressForm.validateCityZipFields()&&b},a.AddressForm.validateNameFields=function(){return $("#address-form-first-name").length&&$("#address-form-last-name").length?a.Validators.validateFormFieldsAreFilledOut([$("#address-form-first-name"),$("#address-form-last-name")]):!0},a.AddressForm.validateStreetAddressFields=function(){return a.Validators.validateFormFieldIsFilledOut($("#address-form-street-1"))},a.AddressForm.validateStateField=function(){return a.Validators.validateFormFieldIsFilledOut($("#address-form-state"))},a.AddressForm.validateCityZipFields=function(){return a.Validators.validateFormFieldsAreFilledOut([$("#address-form-city"),$("#address-form-zip-code")])}}),a.RequestGeneralForm={},jQuery(function(){a.RequestGeneralForm.validateSubform=function(){var b=a.RequestGeneralForm.validateDescription();return b},a.RequestGeneralForm.validateDescription=function(){return a.Validators.validateFormFieldIsFilledOut($("#request-general-form-description"))},a.RequestGeneralForm.setShipping=function(){var a=$("#request-general-form-shipping-group"),b=a.attr("data-default");"express"===b?$("#request-general-form-shipping-express").button("toggle"):$("#request-general-form-shipping-standard").button("toggle")},a.RequestGeneralForm.setShipping()}),a.RequestItemForm={},jQuery(function(){a.RequestItemForm.validateSubform=function(b){var c=a.RequestItemForm.validateDetails(b);return c=a.RequestItemForm.validateName(b)&&c,c=a.RequestItemForm.validateQuantity(b)&&c},a.RequestItemForm.validateName=function(b){return a.Validators.validateFormFieldIsFilledOut(b.find("input[name=name]"))},a.RequestItemForm.validateDetails=function(b){return a.Validators.validateFormFieldIsFilledOut(b.find("textarea[name=details]"))},a.RequestItemForm.validateQuantity=function(b){return a.Validators.validateIntegerFieldIsFilledOutAndPositive(b.find("input[name=quantity]"))},a.RequestItemForm.setDeleteBtnClickHandler=function(){$(".request-item-form-delete-btn").click(a.RequestItemForm.handleDeleteItemBtnClick)},a.RequestItemForm.handleDeleteItemBtnClick=function(b){b.preventDefault();var c=$(this).closest(".request-item-form-frame");c.remove(),a.RequestForm.updateItems(),$("#request-form-add-item-btn").show()},a.RequestItemForm.clearItemForm=function(a){a.find("input[name=name]").val(""),a.find("input[name=brand]").val(""),a.find("input[name=quantity]").val(1),a.find("input[name=details]").val("")},a.RequestItemForm.setDeleteBtnClickHandler()}),a.RequestItemRow={},jQuery(function(){a.RequestItemRow.setClickHandler=function(){$(".item-row-frame").click(a.RequestItemRow.handleClick)},a.RequestItemRow.handleClick=function(a){a.preventDefault(),$(this).find(".item-row-details").slideToggle()},a.RequestItemRow.setClickHandler()}),a.RequestsShow={},jQuery(function(){}),a.Signup={},jQuery(function(){a.Signup.validateLoginFields=function(){return a.Validators.validateEmailAddress($("#signin-email"))&&a.Utils.isFilledOut($("#signin-pass"))},a.Signup.handleSigninClick=function(b){b.preventDefault(),a.Signup.validateLoginFields()?$.post("/api/v1/verify_login",{email:$("#signin-email").val(),pass:$("#signin-pass").val()},function(b){"OK"!==b.request?a.Signup.showLoginError():$("#signin-form").submit()}):a.Signup.showLoginError()},a.Signup.showLoginError=function(){$("#signin-error").show()},a.Signup.setSigninClickHandler=function(){$("#signin-button").click(a.Signup.handleSigninClick)},a.Signup.setSigninClickHandler()}),a.Signup={},jQuery(function(){a.Signup.setSignupClickHandler=function(){$("#signup-button").click(a.Signup.handleSignupClick)},a.Signup.handleSignupClick=function(b){b.preventDefault(),a.Signup.validateSignupForm()&&$("#signup-form").submit()},a.Signup.validateSignupForm=function(){var b=a.Signup.validateEmailAddress();return b=a.Signup.validatePassword()&&b,b=a.Signup.confirmPassword()&&b},a.Signup.validateEmailAddress=function(){return a.Validators.validateFormFieldIsFilledOut($("#signup-email"))},a.Signup.validatePassword=function(){return a.Validators.validateFormFieldIsFilledOut($("#signup-pass"))},a.Signup.confirmPassword=function(){return a.Validators.validateFormFieldsMatch($("#signup-pass"),$("#signup-pass-conf"))},a.Signup.setEmailChangeHandler=function(){$("#signup-email").change(a.Signup.validateEmailAddress)},a.Signup.setPasswordChangeHandler=function(){$("#signup-pass").change(a.Signup.handlePasswordChanged)},a.Signup.setPasswordConfirmationCheck=function(){$("#signup-pass-conf").change(a.Signup.confirmPassword)},a.Signup.handlePasswordChanged=function(){a.Signup.validatePassword(),$("#signup-pass-conf").val().length>0&&a.Signup.confirmPassword()},a.Signup.setSignupClickHandler(),a.Signup.setEmailChangeHandler(),a.Signup.setPasswordChangeHandler(),a.Signup.setPasswordConfirmationCheck()}),a.Utils={},jQuery(function(){a.Utils.isFilledOut=function(a){return a.val()&&a.val().length>0},a.Utils.displayErrorForField=function(a){var b=a.closest(".form-group"),c=b.find(".help-block");a&&b&&c&&(b.addClass("has-error"),c.show())},a.Utils.removeErrorForField=function(a){var b=a.closest(".form-group"),c=b.find(".help-block");a&&b&&c&&(b.removeClass("has-error"),c.hide())},a.Utils.setErrorForField=function(b,c){b?a.Utils.removeErrorForField(c):a.Utils.displayErrorForField(c)},a.Utils.generatePostParamsForForm=function(a){var b=a.serializeArray(),c={};return $.each(b,function(a,b){c[b.name]=b.value}),c},a.Utils.enableAffixFormButtons=function(){$(".form-fixed-button").affix({offset:{bottom:function(){return this.bottom=$(".footer").outerHeight(!0)}}})},a.Utils.enableAffixFormButtons()}),a.Validators={},jQuery(function(){a.Validators.validateEmailAddress=function(a){var b=/^([A-Za-z0-9_\-\.+])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return b.test($(a).val())},a.Validators.validateFormFieldIsFilledOut=function(b){var c=a.Utils.isFilledOut(b);return a.Utils.setErrorForField(c,b),c},a.Validators.validateIntegerFieldIsFilledOutAndPositive=function(b){var c=a.Utils.isFilledOut(b),d=b.val(),e=Math.floor(d)==d&&$.isNumeric(d),f=d>0,g=c&&e&&f;return a.Utils.setErrorForField(g,b),g},a.Validators.validateFormFieldsAreFilledOut=function(b){var c=!0;return $.each(b,function(b,d){c=a.Utils.isFilledOut(d)&&c}),a.Utils.setErrorForField(c,b[0]),c},a.Validators.validateFormFieldsMatch=function(b,c){var d=b.val()===c.val();return a.Utils.setErrorForField(d,b),d}}),a.Extras={},jQuery(function(){a.Extras.setExtrasButtonHandler=function(){$("#extras-button").click(a.Extras.handleExtrasButtonClick)},a.Extras.handleExtrasButtonClick=function(b){if(b.preventDefault(),a.AddressForm.validateFields()){var c=a.Utils.generatePostParamsForForm($("#extras-form"));$.post("/api/v1/update_extras",c,function(a){"OK"===a.request?window.location="/account":$("#extras-error").show()})}},a.Extras.setExtrasButtonHandler()}),a.NewPassword={},jQuery(function(){a.NewPassword.setNewPasswordClickHandler=function(){$("#new-password-save-button").click(a.NewPassword.handleNewPasswordClick)},a.NewPassword.handleNewPasswordClick=function(b){b.preventDefault(),a.NewPassword.validateForm()&&$("#new-password-form").submit()},a.NewPassword.validateForm=function(){var b=a.NewPassword.validatePassword();return b=a.NewPassword.confirmPassword()&&b},a.NewPassword.validatePassword=function(){return a.Validators.validateFormFieldIsFilledOut($("#new-password-pass"))},a.NewPassword.confirmPassword=function(){return a.Validators.validateFormFieldsMatch($("#new-password-pass-conf"),$("#new-password-pass"))},a.NewPassword.setPasswordChangeHandler=function(){$("#new-password-pass").change(a.NewPassword.handlePasswordChanged)},a.NewPassword.setPasswordConfirmationCheck=function(){$("#new-password-pass-conf").change(a.NewPassword.confirmPassword)},a.NewPassword.handlePasswordChanged=function(){a.NewPassword.validatePassword(),$("#new-password-pass-conf").val().length>0&&a.NewPassword.confirmPassword()},a.NewPassword.setNewPasswordClickHandler(),a.NewPassword.setPasswordChangeHandler(),a.NewPassword.setPasswordConfirmationCheck()}),a.ProfileForm={},jQuery(function(){a.ProfileForm.setProfileFormButtonHandler=function(){$("#profile-button").click(a.ProfileForm.handleProfileFormButtonClick)},a.ProfileForm.handleProfileFormButtonClick=function(b){if(b.preventDefault(),a.ProfileForm.validateForm()){var c=a.Utils.generatePostParamsForForm($("#profile-form"));$.post("/api/v1/save_settings",c,function(a){"OK"===a.request?window.location="/account":$("#profile-form-error").show()})}},a.ProfileForm.validateForm=function(){var b=a.AddressForm.validateFields();return b=a.AboutMeForm.validateFields()&&b},a.ProfileForm.setProfileFormButtonHandler()}),a.RequestForm={},jQuery(function(){a.RequestForm.setSubmitBtnClickHandler=function(){$("#request-form-button").click(a.RequestForm.handleSubmitBtnClick)},a.RequestForm.handleSubmitBtnClick=function(b){if(b.preventDefault(),a.RequestForm.validateForm()){var c=a.RequestForm.generatePostParams();$.post("/api/v1/new_request",c,function(a){"OK"===a.request?window.location="/requests/"+a.request_id:$("#request-form-error").show()})}},a.RequestForm.generatePostParams=function(){var a=($("#request-form"),{description:$("#request-form").find("#request-general-form-description").val(),region_id:$("#request-form").find("#request-general-form-region").val(),shipping:$("#request-form").find("#request-general-form-shipping-group").find(".active").attr("value"),items:[]});return $.each($("#request-form-items").children(),function(b,c){a.items.push({name:$(c).find("input[name=name]").val(),brand:$(c).find("input[name=brand]").val(),quantity:$(c).find("input[name=quantity]").val(),details:$(c).find("textarea[name=details]").val(),image_url:null})}),a},a.RequestForm.validateForm=function(){var b=a.RequestGeneralForm.validateSubform();return b=a.RequestForm.validateFormItems()},a.RequestForm.validateFormItems=function(){var b=!0;return $.each($("#request-form-items").children(),function(c,d){b=a.RequestItemForm.validateSubform($(d))&&b}),b},a.RequestForm.setAddItemBtnClickHandler=function(){$("#request-form-add-item-btn").click(a.RequestForm.handleAddItemBtnClick)},a.RequestForm.handleAddItemBtnClick=function(b){b.preventDefault();var c=$("#request-form-items").children().first().clone(!0),d=$("#request-form-items > .request-item-form-frame").length;a.RequestItemForm.clearItemForm(c),c.find(".item-number").html(d+1),$("#request-form-items").append(c),a.RequestForm.updateItems(),d+1===5&&$("#request-form-add-item-btn").hide()},a.RequestForm.numberOfItems=function(){for(var a=0,b=0;5>b;b++)$("#request-item-"+b).is(":visible")&&a++;return a},a.RequestForm.updateItems=function(){var a=$("#request-form-items").children().length;$.each($("#request-form-items").children(),function(b,c){$(c).find(".item-number").html(b+1),1===a?$(c).find(".request-item-form-delete-btn").hide().attr("disabled","disabled"):$(c).find(".request-item-form-delete-btn").show().removeAttr("disabled")})},a.RequestForm.setupTooltips=function(){$(".request-form-tooltip").tooltip()},a.RequestForm.setAddItemBtnClickHandler(),a.RequestForm.setSubmitBtnClickHandler(),a.RequestForm.setupTooltips(),a.RequestForm.updateItems()});